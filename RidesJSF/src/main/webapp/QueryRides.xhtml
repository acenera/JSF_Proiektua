<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 	xmlns="http://www.w3.org/1999/xhtml"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:p="http://primefaces.org/ui">
<f:view>
<h:head>
	<title>Query Rides</title>
</h:head>
<h:body>
	<h:form>
	<table>
	<tr>
		<td><h3>Depart City: </h3></td>
		<td><h:selectOneMenu value="#{Main.departCity}" >
			<f:selectItems value="#{Main.departCities}" />
			<f:ajax event="change" listener="#{Main.listenerFrom}" render="arrival taula mezuak"/>
			</h:selectOneMenu>
		</td>
	</tr>
	<tr>
		<td><h3>Arrival City: </h3></td>
		<td><h:selectOneMenu id="arrival" value="#{Main.arrivalCity}" >
			<f:selectItems value="#{Main.arrivalCities}"/>
			<f:ajax event="change" listener="#{Main.listenerTo}" render="taula mezuak"/>
			</h:selectOneMenu>
		</td>
	</tr>
	<tr><!-- <td>Data (yyyy/MM/dd):</td>
			<td><h:inputText id="data" value="#{login.data}">
			<f:convertDateTime pattern="yyyy/MM/dd"/>
			</h:inputText></td>
			<td> <h:message for="data" style="color:red" /> </td>
			-->
			<td>Data:</td>
			<td><p:calendar id="data" value="#{Main.date}" navigator="false" mode="inline">
			<p:ajax event="dateSelect" listener="#{Main.listenerDate}" update="taula mezuak" process="@this"/>
			</p:calendar></td>
		</tr>
		
	<tr> <td> <h:dataTable id="taula" value="#{Main.unekoBidaiak}" var="item" border="1">
		<f:facet name="header">Bidaien informazioa:</f:facet>
		<h:column>
			<f:facet name="header">Driver</f:facet>
			#{item.driver.name}
		</h:column>
		<h:column>
			<f:facet name="header">Seats</f:facet>
			#{item.nPlaces}
		</h:column>
		<h:column>
			<f:facet name="header">Price</f:facet>
			#{item.price}
		</h:column>
		</h:dataTable></td>
	</tr>
	
	</table>
	<p>
	<h:commandButton value="Atzera" action="#{QueryRides.atzera}"/>
	</p>
	<h:messages id="mezuak" style="color:blue"/>
	</h:form>
</h:body>
</f:view>
</html>
